<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; color: #1f2937; padding: 40px; max-width: 800px; margin: 0 auto; }
  .header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 40px; }
  .business-name { font-size: 24px; font-weight: 700; color: #2563eb; }
  .business-info { font-size: 12px; color: #6b7280; margin-top: 4px; line-height: 1.5; }
  .invoice-title { font-size: 28px; font-weight: 700; color: #1f2937; text-align: right; }
  .invoice-number { font-size: 14px; color: #6b7280; text-align: right; margin-top: 4px; }
  .invoice-meta { display: flex; justify-content: space-between; margin-bottom: 32px; }
  .meta-section { }
  .meta-label { font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; color: #9ca3af; margin-bottom: 4px; }
  .meta-value { font-size: 14px; color: #1f2937; line-height: 1.5; }
  table { width: 100%; border-collapse: collapse; margin-bottom: 24px; }
  thead th { background: #f9fafb; padding: 10px 12px; font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; color: #6b7280; text-align: left; border-bottom: 2px solid #e5e7eb; }
  thead th:last-child { text-align: right; }
  thead th:nth-child(2), thead th:nth-child(3) { text-align: right; }
  tbody td { padding: 10px 12px; font-size: 13px; border-bottom: 1px solid #f3f4f6; }
  tbody td:nth-child(2), tbody td:nth-child(3), tbody td:last-child { text-align: right; }
  .totals { margin-left: auto; width: 280px; }
  .total-row { display: flex; justify-content: space-between; padding: 6px 0; font-size: 13px; }
  .total-row.grand { font-size: 16px; font-weight: 700; border-top: 2px solid #1f2937; padding-top: 10px; margin-top: 4px; }
  .notes { margin-top: 32px; padding: 16px; background: #f9fafb; border-radius: 8px; }
  .notes-label { font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; color: #9ca3af; margin-bottom: 4px; }
  .notes-text { font-size: 13px; color: #4b5563; line-height: 1.5; }
  .footer { margin-top: 40px; text-align: center; font-size: 11px; color: #9ca3af; }
  .status-badge { display: inline-block; padding: 2px 10px; border-radius: 12px; font-size: 11px; font-weight: 600; text-transform: uppercase; }
  .status-draft { background: #f3f4f6; color: #6b7280; }
  .status-sent { background: #dbeafe; color: #2563eb; }
  .status-paid { background: #dcfce7; color: #16a34a; }
  .status-overdue { background: #fef2f2; color: #dc2626; }
</style>
</head>
<body>
  <div class="header">
    <div>
      <div class="business-name">{{business_name}}</div>
      {{#if business_email}}<div class="business-info">{{business_email}}</div>{{/if}}
      {{#if business_address}}<div class="business-info">{{business_address}}</div>{{/if}}
    </div>
    <div>
      <div class="invoice-title">INVOICE</div>
      <div class="invoice-number">{{invoice_number}}</div>
    </div>
  </div>

  <div class="invoice-meta">
    <div class="meta-section">
      <div class="meta-label">Bill To</div>
      <div class="meta-value">
        <strong>{{client_name}}</strong><br>
        {{#if client_company}}{{client_company}}<br>{{/if}}
        {{#if client_email}}{{client_email}}<br>{{/if}}
        {{#if client_address}}{{client_address}}{{/if}}
      </div>
    </div>
    <div class="meta-section" style="text-align: right;">
      <div class="meta-label">Invoice Date</div>
      <div class="meta-value">{{issue_date}}</div>
      <div class="meta-label" style="margin-top: 12px;">Due Date</div>
      <div class="meta-value">{{due_date}}</div>
      <div class="meta-label" style="margin-top: 12px;">Status</div>
      <div class="meta-value"><span class="status-badge status-{{status}}">{{status}}</span></div>
    </div>
  </div>

  <table>
    <thead>
      <tr>
        <th>Description</th>
        <th>Qty</th>
        <th>Rate</th>
        <th>Amount</th>
      </tr>
    </thead>
    <tbody>
      {{#each line_items}}
      <tr>
        <td>{{this.description}}</td>
        <td>{{this.quantity}}</td>
        <td>${{this.unit_price}}</td>
        <td>${{this.amount}}</td>
      </tr>
      {{/each}}
    </tbody>
  </table>

  <div class="totals">
    <div class="total-row">
      <span>Subtotal</span>
      <span>${{subtotal}}</span>
    </div>
    {{#if tax_rate}}
    <div class="total-row">
      <span>Tax ({{tax_rate}}%)</span>
      <span>${{tax_amount}}</span>
    </div>
    {{/if}}
    <div class="total-row grand">
      <span>Total</span>
      <span>${{total}}</span>
    </div>
  </div>

  {{#if notes}}
  <div class="notes">
    <div class="notes-label">Notes</div>
    <div class="notes-text">{{notes}}</div>
  </div>
  {{/if}}

  {{#if payment_link}}
  <div style="margin-top: 24px; text-align: center;">
    <a href="{{payment_link}}" style="display: inline-block; padding: 10px 24px; background: #2563eb; color: white; text-decoration: none; border-radius: 6px; font-size: 14px; font-weight: 600;">Pay Online</a>
  </div>
  {{/if}}

  <div class="footer">
    Generated by FreelanceInvoice
  </div>
</body>
</html>
